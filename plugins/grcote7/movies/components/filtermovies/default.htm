{% set movies = __SELF__.movies %}

<h1>Movies</h1>

<form action="{{ url('filter-movies') }}" method="get">
<div>
    <label for="year">Year</label>
    <select name="year">
        <option value="2014">2014</option>
        <option value="2015">2015</option>
    </select>
    <button type="submit">Filter</button>
</div>

</form>

<ul class="list-group list-group-flush">
    {% for movie in movies %}
    <li class="list-group-item">
        <h3>
            <a href="/movie/{{ movie.slug }}">{{movie.name}} - {{movie.year}}</a>
        </h3>
        <h6>
            {{ movie.genres|map(g=> g.genre_title)|join(', ') }}
        </h6>
        {{ html_limit(movie.description, 150) |raw }}
    </li>
    {% else %}
    <li class="no-data">{{ noRecordsMessage }}</li>
    {% endfor %}
</ul>
